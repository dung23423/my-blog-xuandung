{{ define "main" }}
<div class="posts-page">
    <h1>{{ .Title }}</h1>
    
    {{ $posts := where .Site.RegularPages "Type" "posts" }}
    {{ $postsByYear := $posts.GroupByDate "2006" "desc" }}
    
    {{ range $postsByYear }}
        <section class="posts-year">
            <h2>{{ .Key }}</h2>
            
            {{ range .Pages }}
                <article class="post-item">
                    <!-- Thumbnail -->
                    {{ if .Params.feature }}
                    <div class="post-thumbnail">
                        <img src="{{ .Params.feature }}" alt="{{ .Title }}" loading="lazy">
                    </div>
                    {{ end }}
                    
                    <!-- Content -->
                    <div class="post-content">
                        <h3 class="post-title">
                            <a href="{{ .Permalink }}">{{ .Title }}</a>
                        </h3>
                        
                        <div class="post-meta">
                            <span>
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                </svg>
                                {{ .Date.Format "02 Jan 2006" }}
                            </span>
                            <span>•</span>
                            <span>
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                                {{ .ReadingTime }} phút đọc
                            </span>
                        </div>
                        
                        {{ if .Summary }}
                        <p class="post-summary">{{ .Summary | truncate 150 }}</p>
                        {{ end }}
                        
                        {{ if .Params.tags }}
                        <div class="post-tags">
                            {{ range .Params.tags }}
                            <a href="/tags/{{ . | urlize }}" class="post-tag">{{ . }}</a>
                            {{ end }}
                        </div>
                        {{ end }}
                    </div>
                </article>
            {{ end }}
        </section>
    {{ end }}
</div>
{{ end }}